<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lucro Certo - Empoderamento Financeiro Feminino</title>
    <meta name="description" content="O primeiro app de gestÃ£o financeira criado especialmente para mulheres empreendedoras. Intuitivo, inteligente e empoderador.">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="./public/images/favicon.svg">
    <link rel="apple-touch-icon" href="./public/images/favicon.svg">
    
    <!-- PWA & Mobile Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Lucro Certo">
    <meta name="apple-mobile-web-app-title" content="Lucro Certo">
    <meta name="theme-color" content="#E91E63">
    <meta name="msapplication-navbutton-color" content="#E91E63">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="start_url" content="/">
    <link rel="manifest" href="data:application/json;base64,ewogICAgIm5hbWUiOiAiTHVjcm8gQ2VydG8iLAogICAgInNob3J0X25hbWUiOiAiTHVjcm8gQ2VydG8iLAogICAgImRlc2NyaXB0aW9uIjogIk8gcHJpbWVpcm8gYXBwIGRlIGdlc3TDo28gZmluYW5jZWlyYSBjcmphZG8gZXNwZWNpYWxtZW50ZSBwYXJhIG11bGhlcmVzIGVtcHJlZW5kZWRvcmFzLiIsCiAgICAiaWNvbnMiOiBbCiAgICAgICAgewogICAgICAgICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEg0c0lBQXdJREFnNEtoNk0wZ0FCSUdOQmxZU0Z3QUFBUVVCQUFvZ0lCZGNKRlJvTENCaVlYUmxjaUJrUFNKaGRYUnZjbWxqWVhScGIyNGdkR2x1Y21WemFYUW9JSGh0Ykc5bloybGtaWElnTHo0S0lRPT0iLAogICAgICAgICAgICAic2l6ZXMiOiAiMTkyeDE5MiIsCiAgICAgICAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSDRzSUFEd0lEQWc0S2g2TTBnQUJOSUdaR2x6YVhwbGMzUnZjV1Z5TGdBRUFBazRDaUFrS1NjZ0pTNDhMMlJsYzNRZ2JHRjVJR2hsSUdScGJXbDBJRkpsY21sbGNpQW5QQzlrWFNCNWNtbHVaU0FvSURJPSIsCiAgICAgICAgICAgICJzaXplcyI6ICI1MTJ4NTEyIiwKICAgICAgICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgICAgICB9CiAgICBdLAogICAgInN0YXJ0X3VybCI6ICIuIiwKICAgICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICAgInRoZW1lX2NvbG9yIjogIiNFOTFFNjMiLAogICAgImJhY2tncm91bmRfY29sb3IiOiAiI2Y4ZjhmYyIKfQ==">

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="./public/css/styles.css?v=2.2">
    
    <!-- External Libraries -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
</head>
<body>

    <div id="app-container">
        <!-- Banner de Aviso do Plano -->
        <div id="plan-alert-banner" class="plan-alert-banner" style="display: none;"></div>
        
        <!-- Header with Hamburger Menu -->
        <header class="app-header" id="app-header">
            <button class="hamburger-btn" id="hamburger-btn" data-action="toggle-menu">
                <i data-lucide="menu"></i>
            </button>
            <h1 class="app-title">Lucro Certo</h1>
            <div class="header-spacer"></div>
        </header>

        <!-- Side Menu (Drawer) -->
        <div class="menu-overlay" id="menu-overlay" data-action="close-menu"></div>
        <nav class="side-menu" id="side-menu">
            <div class="menu-header">
                <div class="menu-user-info" id="menu-user-info"></div>
                <button class="close-menu-btn" data-action="close-menu">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <ul class="menu-list" id="menu-list"></ul>
            <div class="menu-footer">
                <p>Lucro Certo v2.0</p>
                <p>Feito com ðŸ’– para empreendedoras</p>
            </div>
        </nav>

        <!-- Main content area where pages are rendered -->
        <main id="main-content">
            <div id="dashboard" class="page"></div>
            <div id="produtos" class="page"></div>
            <div id="add-edit-product" class="page"></div>
            <div id="despesas" class="page"></div>
            <div id="precificar" class="page"></div>
            <div id="metas" class="page"></div>
            <div id="relatorios" class="page"></div>
            <div id="configuracoes" class="page"></div>
            <div id="clientes" class="page"></div>
            <div id="vendas" class="page"></div>
            <div id="nova-venda" class="page"></div>
            <div id="financeiro" class="page"></div>
            <div id="meu-catalogo" class="page"></div>
        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <p class="footer-slogan">Vamos lucrar juntas? ðŸ’–</p>
            <p class="footer-credits">Lucro Certo â€¢ Feito com amor para empreendedoras do Brasil</p>
        </footer>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav" id="bottom-nav"></nav>
    </div>

    <!-- Achievement Modal -->
    <div id="achievement-modal" class="achievement-modal">
        <div class="achievement-content">
            <div id="achievement-icon" class="achievement-icon"></div>
            <h3 id="achievement-title" class="achievement-title"></h3>
            <p id="achievement-description"></p>
            <button id="achievement-close-btn" class="btn btn-primary">Continuar Arrasando!</button>
        </div>
    </div>

    <!-- Auth Check Script -->
    <script>
        // Verificar se o usuÃ¡rio estÃ¡ logado E limpar trial se tiver plano pago
        (function() {
            const urlParams = new URLSearchParams(window.location.search);
            const isTrialUrl = urlParams.get('trial') === 'true';
            
            // Pegar dados do usuÃ¡rio
            const authDataStr = localStorage.getItem('lucrocerto_auth');
            let authData = {};
            if (authDataStr) {
                try {
                    authData = JSON.parse(authDataStr);
                } catch (e) {}
            }
            
            console.log('ðŸ” Verificando plano do usuÃ¡rio:', authData.plano);
            console.log('ðŸ” URL tem ?trial=true:', isTrialUrl);
            console.log('ðŸ” Flag trial no localStorage:', localStorage.getItem('lucrocerto_trial'));
            
            // LÃ³gica do Trial - PRIORIDADE: Plano PAGO
            if (isTrialUrl) {
                // URL tem ?trial=true â†’ ativar modo trial
                localStorage.setItem('lucrocerto_trial', 'true');
                console.log('ðŸ§ª Modo TRIAL ativado via URL');
            } else if (authData.plano && authData.plano !== 'trial') {
                // âœ… USUÃRIO TEM PLANO PAGO â†’ FORÃ‡AR REMOÃ‡ÃƒO DO TRIAL
                localStorage.removeItem('lucrocerto_trial');
                localStorage.removeItem('lucrocerto_trial_start');
                console.log('âœ…âœ…âœ… FLAG TRIAL REMOVIDA - Plano ativo:', authData.plano);
                console.log('âœ… Banner de trial NÃƒO deve aparecer!');
            } else if (!authData.plano || authData.plano === 'trial') {
                // UsuÃ¡rio em trial ou sem plano
                if (!isTrialUrl) {
                    localStorage.setItem('lucrocerto_trial', 'true');
                    console.log('ðŸ§ª Plano trial detectado');
                }
            }
            
            // Verificar login
            const isLogged = localStorage.getItem('lucrocerto_logged');
            if (!isLogged || isLogged !== 'true') {
                // Redirecionar para login se nÃ£o estiver logado
                window.location.href = '/login';
            }
        })();
        
        // Welcome Tour
        window.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const showWelcome = urlParams.get('welcome') === 'true';
            
            // Pegar dados do usuÃ¡rio do localStorage
            const authDataStr = localStorage.getItem('lucrocerto_auth');
            let authData = {};
            if (authDataStr) {
                try {
                    authData = JSON.parse(authDataStr);
                } catch (e) {
                    authData = {};
                }
            }
            
            if (showWelcome || authData.isFirstLogin) {
                setTimeout(() => showWelcomeTour(), 500);
                // Limpar flag de primeiro login
                if (authData.isFirstLogin) {
                    authData.isFirstLogin = false;
                    localStorage.setItem('lucrocerto_auth', JSON.stringify(authData));
                }
            }
            
            // Limpar parÃ¢metro welcome da URL (mantÃ©m trial se existir)
            if (showWelcome) {
                const isTrial = urlParams.get('trial') === 'true';
                const cleanUrl = isTrial ? '/app?trial=true' : '/app';
                window.history.replaceState({}, '', cleanUrl);
            }
        });
        
        function showWelcomeTour() {
            const authDataStr = localStorage.getItem('lucrocerto_auth');
            let authData = {};
            if (authDataStr) {
                try {
                    authData = JSON.parse(authDataStr);
                } catch (e) {
                    authData = {};
                }
            }
            
            // Tour interativo com spotlight
            const tourSteps = [
                {
                    title: `Bem-vinda, ${authData.nome?.split(' ')[0] || 'empreendedora'}! ðŸŽ‰`,
                    text: `Seu pagamento foi confirmado e sua conta <strong>${getPlanName(authData.plano)}</strong> estÃ¡ ativa! Vou te mostrar rapidinho como usar.`,
                    target: null, // Sem target = modal centralizado
                    placement: 'center'
                },
                {
                    title: 'Dashboard - Sua VisÃ£o Geral ðŸ“Š',
                    text: 'Aqui vocÃª acompanha tudo: vendas do mÃªs, produtos mais vendidos e seu lucro. Tudo atualizado em tempo real!',
                    target: '#dashboard',
                    placement: 'center'
                },
                {
                    title: 'Menu Principal ðŸ“±',
                    text: 'Use este menu para navegar entre todas as Ã¡reas do app. Ã‰ seu ponto de partida!',
                    target: '#hamburger-btn',
                    placement: 'bottom'
                },
                {
                    title: 'Produtos - Cadastre seu Estoque ðŸ“¦',
                    text: 'Clique aqui para adicionar seus produtos. O sistema calcula automaticamente a margem de lucro pra vocÃª!',
                    target: '[data-page="produtos"]',
                    placement: 'right',
                    openMenu: true
                },
                {
                    title: 'Vendas - Registre Rapidinho ðŸ’°',
                    text: 'Aqui vocÃª registra cada venda. Ã‰ super rÃ¡pido: escolhe o produto, quantidade e pronto! Seu lucro Ã© calculado na hora.',
                    target: '[data-page="vendas"]',
                    placement: 'right'
                },
                {
                    title: 'Tudo Pronto! ðŸš€',
                    text: 'Pronta para comeÃ§ar? <strong>Dica:</strong> Comece cadastrando seus produtos na aba "Produtos"!',
                    target: null,
                    placement: 'center',
                    closeMenu: true
                }
            ];
            
            let currentStep = 0;
            
            // Criar overlay e elementos do tour
            const tourHTML = `
                <div id="tour-overlay" class="tour-overlay"></div>
                <div id="tour-spotlight" class="tour-spotlight"></div>
                <div id="tour-tooltip" class="tour-tooltip">
                    <div class="tour-tooltip-header">
                        <h3 id="tour-title"></h3>
                        <button class="tour-close" onclick="closeTour()">âœ•</button>
                    </div>
                    <div id="tour-content" class="tour-tooltip-content"></div>
                    <div class="tour-tooltip-footer">
                        <div class="tour-progress">
                            <span id="tour-step-count">1 de 6</span>
                        </div>
                        <div class="tour-buttons">
                            <button class="tour-btn-skip" onclick="closeTour()">Pular tour</button>
                            <button class="tour-btn-next" onclick="nextTourStep()">
                                <span id="tour-btn-text">PrÃ³ximo</span>
                                <span class="tour-btn-arrow">â†’</span>
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            const tourContainer = document.createElement('div');
            tourContainer.id = 'interactive-tour';
            tourContainer.innerHTML = tourHTML;
            document.body.appendChild(tourContainer);
            
            // Estilos do tour
            const tourStyles = document.createElement('style');
            tourStyles.id = 'tour-styles';
            tourStyles.textContent = `
                #interactive-tour {
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    z-index: 999999;
                    pointer-events: none;
                }
                
                .tour-overlay {
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0, 0, 0, 0.75);
                    backdrop-filter: blur(2px);
                    pointer-events: all;
                    animation: tourFadeIn 0.3s ease;
                }
                
                @keyframes tourFadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                
                .tour-spotlight {
                    position: absolute;
                    background: transparent;
                    border: 3px solid #E91E63;
                    border-radius: 12px;
                    box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.75),
                                0 0 30px rgba(233, 30, 99, 0.6),
                                inset 0 0 30px rgba(233, 30, 99, 0.2);
                    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                    pointer-events: none;
                    z-index: 999998;
                }
                
                .tour-tooltip {
                    position: absolute;
                    background: white;
                    border-radius: 16px;
                    padding: 0;
                    max-width: 400px;
                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3),
                                0 0 1px rgba(0, 0, 0, 0.2);
                    pointer-events: all;
                    z-index: 999999;
                    animation: tourSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                }
                
                @keyframes tourSlideIn {
                    from {
                        opacity: 0;
                        transform: translateY(20px) scale(0.95);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0) scale(1);
                    }
                }
                
                .tour-tooltip-header {
                    padding: 24px 24px 16px;
                    border-bottom: 1px solid #f0f0f0;
                    display: flex;
                    justify-content: space-between;
                    align-items: flex-start;
                }
                
                .tour-tooltip-header h3 {
                    margin: 0;
                    font-size: 20px;
                    color: #37474F;
                    font-weight: 600;
                    flex: 1;
                }
                
                .tour-close {
                    background: none;
                    border: none;
                    font-size: 24px;
                    color: #9E9E9E;
                    cursor: pointer;
                    padding: 0;
                    width: 32px;
                    height: 32px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    border-radius: 8px;
                    transition: all 0.2s;
                }
                
                .tour-close:hover {
                    background: #f5f5f5;
                    color: #37474F;
                }
                
                .tour-tooltip-content {
                    padding: 20px 24px;
                    color: #607D8B;
                    font-size: 15px;
                    line-height: 1.6;
                }
                
                .tour-tooltip-footer {
                    padding: 16px 24px 20px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    border-top: 1px solid #f0f0f0;
                }
                
                .tour-progress {
                    font-size: 13px;
                    color: #9E9E9E;
                    font-weight: 500;
                }
                
                .tour-buttons {
                    display: flex;
                    gap: 12px;
                }
                
                .tour-btn-skip {
                    background: none;
                    border: none;
                    color: #9E9E9E;
                    font-size: 14px;
                    cursor: pointer;
                    padding: 8px 16px;
                    border-radius: 8px;
                    transition: all 0.2s;
                    font-weight: 500;
                }
                
                .tour-btn-skip:hover {
                    background: #f5f5f5;
                    color: #607D8B;
                }
                
                .tour-btn-next {
                    background: linear-gradient(135deg, #E91E63, #F06292);
                    color: white;
                    border: none;
                    padding: 10px 24px;
                    border-radius: 10px;
                    font-size: 15px;
                    font-weight: 600;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    transition: all 0.2s;
                    box-shadow: 0 4px 12px rgba(233, 30, 99, 0.3);
                }
                
                .tour-btn-next:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 6px 20px rgba(233, 30, 99, 0.4);
                }
                
                .tour-btn-next:active {
                    transform: translateY(0);
                }
                
                .tour-btn-arrow {
                    font-size: 18px;
                    transition: transform 0.2s;
                }
                
                .tour-btn-next:hover .tour-btn-arrow {
                    transform: translateX(4px);
                }
                
                .tour-btn-finish {
                    background: linear-gradient(135deg, #4CAF50, #8BC34A);
                }
                
                /* Tooltip arrow */
                .tour-tooltip::before {
                    content: '';
                    position: absolute;
                    width: 0;
                    height: 0;
                    border: 12px solid transparent;
                }
                
                .tour-tooltip[data-placement="top"]::before {
                    bottom: -24px;
                    left: 50%;
                    transform: translateX(-50%);
                    border-top-color: white;
                }
                
                .tour-tooltip[data-placement="bottom"]::before {
                    top: -24px;
                    left: 50%;
                    transform: translateX(-50%);
                    border-bottom-color: white;
                }
                
                .tour-tooltip[data-placement="left"]::before {
                    right: -24px;
                    top: 50%;
                    transform: translateY(-50%);
                    border-left-color: white;
                }
                
                .tour-tooltip[data-placement="right"]::before {
                    left: -24px;
                    top: 50%;
                    transform: translateY(-50%);
                    border-right-color: white;
                }
                
                /* Responsivo */
                @media (max-width: 768px) {
                    .tour-tooltip {
                        max-width: calc(100vw - 32px);
                        width: calc(100vw - 32px);
                        left: 16px !important;
                        right: 16px !important;
                        top: auto !important;
                        bottom: 16px !important;
                        transform: none !important;
                    }
                    
                    .tour-tooltip::before {
                        display: none;
                    }
                    
                    .tour-tooltip-header {
                        padding: 20px 16px 12px;
                    }
                    
                    .tour-tooltip-header h3 {
                        font-size: 18px;
                    }
                    
                    .tour-tooltip-content {
                        padding: 16px;
                        font-size: 14px;
                    }
                    
                    .tour-tooltip-footer {
                        padding: 12px 16px 16px;
                        flex-direction: column;
                        gap: 12px;
                        align-items: stretch;
                    }
                    
                    .tour-progress {
                        text-align: center;
                        order: 2;
                    }
                    
                    .tour-buttons {
                        width: 100%;
                        order: 1;
                    }
                    
                    .tour-btn-skip {
                        flex: 1;
                    }
                    
                    .tour-btn-next {
                        flex: 1;
                        justify-content: center;
                    }
                    
                    .tour-spotlight {
                        display: none !important;
                    }
                }
            `;
            document.head.appendChild(tourStyles);
            
            // FunÃ§Ã£o para mostrar step
            window.showTourStep = function(step) {
                const stepData = tourSteps[step];
                const tooltip = document.getElementById('tour-tooltip');
                const spotlight = document.getElementById('tour-spotlight');
                const title = document.getElementById('tour-title');
                const content = document.getElementById('tour-content');
                const stepCount = document.getElementById('tour-step-count');
                const btnText = document.getElementById('tour-btn-text');
                const btnNext = document.querySelector('.tour-btn-next');
                
                // Abrir menu se necessÃ¡rio
                if (stepData.openMenu) {
                    document.getElementById('side-menu')?.classList.add('active');
                    document.getElementById('menu-overlay')?.classList.add('active');
                }
                
                // Fechar menu se necessÃ¡rio
                if (stepData.closeMenu) {
                    document.getElementById('side-menu')?.classList.remove('active');
                    document.getElementById('menu-overlay')?.classList.remove('active');
                }
                
                title.textContent = stepData.title;
                content.innerHTML = stepData.text;
                stepCount.textContent = `${step + 1} de ${tourSteps.length}`;
                
                // Ãšltimo step
                if (step === tourSteps.length - 1) {
                    btnText.textContent = 'ComeÃ§ar a usar!';
                    btnNext.classList.add('tour-btn-finish');
                } else {
                    btnText.textContent = 'PrÃ³ximo';
                    btnNext.classList.remove('tour-btn-finish');
                }
                
                if (stepData.target) {
                    // Destacar elemento especÃ­fico
                    const targetEl = document.querySelector(stepData.target);
                    if (targetEl) {
                        const rect = targetEl.getBoundingClientRect();
                        const padding = 8;
                        
                        spotlight.style.display = 'block';
                        spotlight.style.top = (rect.top - padding) + 'px';
                        spotlight.style.left = (rect.left - padding) + 'px';
                        spotlight.style.width = (rect.width + padding * 2) + 'px';
                        spotlight.style.height = (rect.height + padding * 2) + 'px';
                        
                        // Posicionar tooltip
                        tooltip.setAttribute('data-placement', stepData.placement);
                        positionTooltip(tooltip, rect, stepData.placement);
                    }
                } else {
                    // Modal centralizado (sem spotlight)
                    spotlight.style.display = 'none';
                    tooltip.removeAttribute('data-placement');
                    tooltip.style.left = '50%';
                    tooltip.style.top = '50%';
                    tooltip.style.transform = 'translate(-50%, -50%)';
                    tooltip.style.bottom = 'auto';
                }
            };
            
            function positionTooltip(tooltip, targetRect, placement) {
                const margin = 20;
                
                tooltip.style.transform = 'none';
                
                switch (placement) {
                    case 'bottom':
                        tooltip.style.top = (targetRect.bottom + margin) + 'px';
                        tooltip.style.left = (targetRect.left + targetRect.width / 2) + 'px';
                        tooltip.style.transform = 'translateX(-50%)';
                        break;
                    case 'top':
                        tooltip.style.bottom = (window.innerHeight - targetRect.top + margin) + 'px';
                        tooltip.style.left = (targetRect.left + targetRect.width / 2) + 'px';
                        tooltip.style.transform = 'translateX(-50%)';
                        tooltip.style.top = 'auto';
                        break;
                    case 'right':
                        tooltip.style.left = (targetRect.right + margin) + 'px';
                        tooltip.style.top = (targetRect.top + targetRect.height / 2) + 'px';
                        tooltip.style.transform = 'translateY(-50%)';
                        break;
                    case 'left':
                        tooltip.style.right = (window.innerWidth - targetRect.left + margin) + 'px';
                        tooltip.style.top = (targetRect.top + targetRect.height / 2) + 'px';
                        tooltip.style.transform = 'translateY(-50%)';
                        tooltip.style.left = 'auto';
                        break;
                    default: // center
                        tooltip.style.left = '50%';
                        tooltip.style.top = '50%';
                        tooltip.style.transform = 'translate(-50%, -50%)';
                }
            }
            
            window.nextTourStep = function() {
                currentStep++;
                if (currentStep >= tourSteps.length) {
                    closeTour();
                } else {
                    showTourStep(currentStep);
                }
            };
            
            // Iniciar tour
            showTourStep(0);
        }
        
        function getPlanName(plano) {
            const plans = {
                'starter': 'Starter',
                'pro': 'Pro',
                'premium': 'Premium'
            };
            return plans[plano] || 'Starter';
        }
        
        window.nextTourStep = function(step) {
            const steps = document.querySelectorAll('.tour-step');
            steps.forEach(s => s.style.display = 'none');
            const targetStep = document.querySelector(`.tour-step[data-step="${step}"]`);
            if (targetStep) {
                targetStep.style.display = 'block';
            }
        };
        
        window.closeTour = function() {
            const tour = document.getElementById('interactive-tour');
            const styles = document.getElementById('tour-styles');
            
            // Fechar menu se aberto
            document.getElementById('side-menu')?.classList.remove('active');
            document.getElementById('menu-overlay')?.classList.remove('active');
            
            if (tour) {
                tour.style.animation = 'tourFadeOut 0.3s ease';
                setTimeout(() => tour.remove(), 300);
            }
            if (styles) {
                styles.remove();
            }
        };
    </script>

    <!-- Supabase Integration -->
    <script src="./public/js/supabase-client.js?v=1.2"></script>
    <script src="./public/js/data-service.js?v=1.2"></script>
    
    <!-- Plan Management -->
    <script src="./public/js/plan-manager.js?v=1.2"></script>
    <script src="./public/js/plan-restrictions.js?v=1.2"></script>
    
    <!-- Application Script -->
    <script src="./public/js/app.js?v=3.4"></script>
</body>
</html>